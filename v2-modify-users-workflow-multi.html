<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Modify Users - Multiple Subscriptions</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: Arial, sans-serif; margin: 0; background: #f5f5f5; }

/* Top Bar */
.top-bar { background: #1a3a52; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; }
.logo { color: #fff; font-size: 18px; font-weight: 600; }
.user-menu { display: flex; align-items: center; gap: 15px; color: #fff; }
.avatar { width: 40px; height: 40px; background: #666; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #fff; font-weight: 600; font-size: 14px; }

/* Layout */
.layout { display: flex; min-height: calc(100vh - 70px); }

/* Sidebar */
.sidebar { width: 75px; background: #2c3e50; display: flex; flex-direction: column; gap: 12px; padding: 15px 5px; align-items: center; }
.nav-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
.nav-icon { width: 40px; height: 40px; background: #34495e; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #fff; font-size: 20px; margin-bottom: 3px; }
.nav-icon:hover { background: #3d5a73; }
.nav-icon.selected { background: #1976d2; }
.nav-label { color: #fff; font-size: 9px; text-align: center; line-height: 1.1; font-weight: 500; width: 70px; }

/* Main Content */
.main-content { flex: 1; padding: 30px; }
.container { max-width: 1600px; margin: 0 auto; background: #fff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
.header { padding: 24px 32px; border-bottom: 2px solid #e0e0e0; }
.header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
h1 { margin: 0; font-size: 28px; }
.header-icons { display: flex; gap: 12px; align-items: center; }
.header-icon { background: none; border: none; padding: 0; cursor: pointer; font-size: 20px; color: #666; transition: opacity 0.2s; }
.header-icon:hover { opacity: 0.7; }
.header-icon.primary { color: #1976d2; }
.tabs { display: flex; gap: 8px; }
.tab { padding: 8px 16px; background: #e0e0e0; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
.tab.active { background: #424242; color: #fff; }

/* Split View */
.split-view { display: flex; height: 700px; }
.left-panel { width: 50%; border-right: 1px solid #e0e0e0; display: flex; flex-direction: column; }
.right-panel { width: 50%; background: #fafafa; overflow-y: auto; display: flex; flex-direction: column; padding: 24px; }

/* Search Box */
.search-box { padding: 16px; border-bottom: 1px solid #e0e0e0; position: relative; background: #fff; }
.search-box input { width: 100%; padding: 8px 8px 8px 35px; border: 1px solid #ccc; border-radius: 4px; font-size: 14px; }
.search-icon { position: absolute; left: 24px; top: 50%; transform: translateY(-50%); font-size: 16px; color: #999; }

/* User Table */
table { width: 100%; border-collapse: collapse; }
thead { background: #f0f0f0; position: sticky; top: 0; }
th { text-align: left; padding: 12px 8px; background: #f0f0f0; border-bottom: 2px solid #e0e0e0; font-size: 13px; font-weight: 600; }
td { padding: 12px 8px; border-bottom: 1px solid #eee; font-size: 14px; }
tr:hover { background: #f9f9f9; }
tr.selected { background: #e3f2fd; }
.user-role { font-size: 12px; color: #666; margin-top: 3px; display: flex; align-items: center; gap: 6px; }
.user-role::before { content: ''; width: 10px; height: 10px; background: #666; border-radius: 50%; display: inline-block; flex-shrink: 0; }
.user-link { color: #0c79a8; text-decoration: underline; font-size: 14px; font-weight: 500; cursor: pointer; }

/* Pills & Badges */
.zone-badge { display: inline-flex; align-items: center; gap: 6px; padding: 6px 8px; background: #e7e6e5; border-radius: 30px; font-size: 12px; font-weight: 600; color: #1c1f22; height: 26px; line-height: 14px; }
.zone-counter { display: inline-flex; align-items: center; justify-content: center; padding: 2px 6px; background: #feffff; border-radius: 30px; font-size: 12px; font-weight: 600; color: #1c1f22; min-width: 20px; height: 20px; line-height: 14px; }
.pro-badge { display: inline-flex; padding: 2px 6px; background: #459d13; color: #fff; border-radius: 4px; font-size: 10px; font-weight: 700; margin-left: 4px; height: 16px; align-items: center; }
input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; }

/* User Actions */
.user-actions { display: flex; gap: 8px; align-items: center; }
.action-btn { padding: 6px 12px; background: #fff; border: 1px solid #ccc; border-radius: 4px; cursor: pointer; font-size: 13px; font-weight: 500; transition: all 0.2s; }
.action-btn.add { color: #4caf50; border-color: #4caf50; }
.action-btn.add:hover { background: #f1f8f4; }
.action-btn.remove { color: #d32f2f; border-color: #d32f2f; }
.action-btn.remove:hover { background: #fef5f5; }
.action-btn:disabled { opacity: 0.4; cursor: not-allowed; }

/* Subscription Section */
.subscription-section { background: #fff; border: 2px solid #424242; border-radius: 8px; padding: 20px; margin-bottom: 24px; }
.subscription-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
.subscription-title { font-size: 16px; font-weight: 600; }
.seat-count { font-size: 13px; color: #666; }
.seat-bar-container { width: 100%; height: 20px; background: #feffff; border: 1px solid #dad8d7; border-radius: 15px; padding: 4px; margin-bottom: 16px; }
.seat-bar-fill { height: 100%; border-radius: 100px; transition: width 0.3s; }
.fill-pro { background: #459d13; }
.fill-starter { background: #00a1e0; }

.info-text { font-size: 13px; color: #666; margin-bottom: 16px; line-height: 1.5; }
.button-row { display: flex; gap: 12px; margin-top: 16px; }
.btn { padding: 10px 24px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 500; }
.btn-secondary { background: #e0e0e0; color: #424242; }
.btn-primary { background: #424242; color: #fff; }
.btn-primary:disabled { opacity: 0.3; cursor: not-allowed; background: #e0e0e0; color: #999; }

/* Drawer */
.drawer { display: none; position: fixed; top: 0; right: 0; width: 500px; height: 100vh; background: white; box-shadow: -4px 0 20px rgba(0,0,0,0.2); z-index: 2000; padding: 32px; overflow-y: auto; }
.drawer.show { display: block; animation: slideInRight 0.3s ease; }
@keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }
.drawer-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1999; }
.drawer-overlay.show { display: block; }
</style>
</head>
<body>

<!-- Top Bar -->
<div class="top-bar">
  <div class="logo">ConstructConnect</div>
  <div class="user-menu">
    <span>Christopher Donaldson</span>
    <div class="avatar">CD</div>
  </div>
</div>

<!-- Layout -->
<div class="layout">
  
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="nav-item">
      <div class="nav-icon">üè¢</div>
      <div class="nav-label">Company</div>
    </div>
    <div class="nav-item">
      <div class="nav-icon">üë•</div>
      <div class="nav-label">Users &<br>Groups</div>
    </div>
    <div class="nav-item">
      <div class="nav-icon">üë§</div>
      <div class="nav-label">Roles</div>
    </div>
    <div class="nav-item">
      <div class="nav-icon selected">üìã</div>
      <div class="nav-label">Subs &<br>Licenses</div>
    </div>
    <div class="nav-item">
      <div class="nav-icon">üí≥</div>
      <div class="nav-label">Billing</div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="container">
      
      <!-- Header & Tabs -->
      <div class="header">
        <div class="header-top">
          <h1>Subscriptions & Licenses</h1>
          <div class="header-icons">
            <button class="header-icon primary" title="Invite User">üë§+</button>
            <button class="header-icon" title="Recent Activity">üïê</button>
            <button class="header-icon" title="User Profile">üë§</button>
          </div>
        </div>
        <div class="tabs">
          <button class="tab" onclick="window.location.href='v2-subscription-overview-multi.html'">Organization Overview</button>
          <button class="tab active">Project Intelligence</button>
          <button class="tab">Bid Management</button>
          <button class="tab">Takeoff & Estimating</button>
          <button class="tab">API Apps <span style="background: #88888e; color: #fff; border-radius: 12px; padding: 2px 6px; font-size: 10px; margin-left: 4px;">2</span></button>
        </div>
      </div>

      <!-- Split View -->
      <div class="split-view">
        
        <!-- LEFT PANEL: User Table -->
        <div class="left-panel">
          <div class="search-box">
            <span class="search-icon">üîç</span>
            <input type="text" placeholder="Search users...">
          </div>
          <table>
            <thead>
              <tr>
                <th style="width:40px">
                  <input type="checkbox" id="selectAllUsers">
                </th>
                <th>User Name</th>
                <th>Subscription Access</th>
                <th style="width:100px">Actions</th>
              </tr>
            </thead>
            <tbody id="users"></tbody>
          </table>
        </div>

        <!-- RIGHT PANEL: Dual Subscription Sections -->
        <div class="right-panel">
          
          <!-- PROJECT INTELLIGENCE PRO SEATS Section -->
          <div class="subscription-section">
            <div class="subscription-header">
              <div class="subscription-title">Project Intelligence Pro Seats</div>
              <div class="seat-count">7/20 Used</div>
            </div>
            
            <div class="seat-bar-container">
              <div class="seat-bar-fill fill-pro" style="width: 35%"></div>
            </div>
            
            <div class="info-text" id="proInfoText">
              Your current assigned seats for Project Intelligence Pro include:
              <ul style="margin: 8px 0 8px 20px;">
                <li>1 Full access</li>
                <li>1 Modified</li>
              </ul>
              By clicking 'add' you assign a seat and provide the user full access.<br>
              Once a user has been added, you can then modify their access to specific counties.
            </div>
            
            <div class="button-row" id="proButtons">
              <button class="btn btn-success" id="addProBtn" disabled>+ Add</button>
              <button class="btn btn-primary" id="modifyProBtn" disabled>Modify Selected Users</button>
              <button class="btn btn-decondary" id="addProBtn" disabled>Add Selected User(s)</button>
              <button class="btn btn-secondary" id="modifyProBtn" disabled>Modify Selected Users

          <!-- PROJECT INTELLIGENCE STARTER SEATS Section -->
          <div class="subscription-section">
            <div class="subscription-header">
              <div class="subscription-title">Project Intelligence Starter Seats</div>
              <div class="seat-count">7/7 Used</div>
            </div>
            
            <div class="seat-bar-container">
              <div class="seat-bar-fill fill-starter" style="width: 100%"></div>
            </div>
            
            <div class="info-text" id="starterInfoText">
              Your current assigned seats for Project Intelligence Starter include:
              <ul style="margin: 8px 0 8px 20px;">
                <li>1 Full access</li>
                <li>1 Modified</li>
              </ul>
              By clicking 'add' you assign a seat and provide the user full access.<br>
              Once a user has been added, you can then modify their access to specific counties.
            </div>
            
            <div class="button-row" id="starterButtons">
              <button class="btn btn-success" id="addStarterBtn" disabled>+ Add</button>
              <button class="btn btn-pecondary" id="addStarterBtn" disabled>Add Selected User(s)</button>
              <button class="btn btn-secondary" id="modifyStarterBtn" disabled>Modify Selected Users
          </div>

        </div>

      </div>

    </div>
  </div>

</div>

<!-- User Profile Drawer -->
<div id="userProfileDrawer" class="drawer">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
    <h2 style="margin: 0;">User Profile Summary</h2>
    <button onclick="closeUserProfileDrawer()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">‚úï</button>
  </div>
  
  <div style="text-align: center; padding: 48px 24px;">
    <div style="font-size: 64px; margin-bottom: 24px;">üë§</div>
    <h3 id="userProfileName" style="margin-bottom: 16px; color: #424242;"></h3>
    <p style="color: #666; line-height: 1.6; margin-bottom: 24px;">
      User profile details coming soon
    </p>
  </div>
  
  <div style="margin-top: 32px; text-align: center;">
    <button onclick="closeUserProfileDrawer()" class="btn btn-primary">Close</button>
  </div>
</div>

<div id="userProfileOverlay" class="drawer-overlay" onclick="closeUserProfileDrawer()"></div>

<script>
// Initialize data with subscription types
var data = {
  users: [
    {id:1, name:'Malcom Reynolds', role:'Chief Estimator', accessType:'full', subscription:'Pro', zoneCount:null},
    {id:2, name:'River Tam', role:'Chief Estimator', accessType:'full', subscription:'Starter', zoneCount:null},
    {id:3, name:'Zoe Washburne', role:'Estimator', accessType:'modified', subscription:'Pro', zoneCount:123},
    {id:4, name:'Kaylee Fry', role:'Estimator', accessType:'modified', subscription:'Starter', zoneCount:123},
    {id:5, name:'Simon Tam', role:'Estimator', accessType:'none', subscription:null, zoneCount:0},
    {id:6, name:'Jayne Cobb', role:'Project Manager', accessType:'none', subscription:null, zoneCount:0},
    {id:7, name:'Inara Serra', role:'Business Analyst', accessType:'none', subscription:null, zoneCount:0},
    {id:8, name:'Brandon Haystack', role:'Senior Estimator', accessType:'none', subscription:null, zoneCount:0}
  ]
};

var sel = {users:{}};

function render() {
  var h = '';
  
  for(var i = 0; i < data.users.length; i++) {
    var u = data.users[i];
    var rowClass = sel.users[u.id] ? 'selected' : '';
    
    h += '<tr class="' + rowClass + '">';
    
    // Checkbox
    h += '<td><input type="checkbox" ' + (sel.users[u.id] ? 'checked' : '') + 
         ' onclick="toggleUser(' + u.id + ')"></td>';
    
    // User name
    h += '<td><div><a onclick="openUserProfileDrawer(\'' + u.name + '\')" class="user-link">' + u.name + '</a></div>' +
         '<div class="user-role">' + u.role + '</div></td>';
    
    // Subscription Access
    h += '<td>';
    if(u.accessType === 'full') {
      h += '<span class="zone-badge">Full Access';
      if(u.subscription === 'Pro') h += '<span class="pro-badge">PRO</span>';
      h += '</span>';
    } else if(u.accessType === 'modified') {
      h += '<span class="zone-badge">Modified';
      if(u.subscription === 'Pro') h += '<span class="pro-badge">PRO</span>';
      h += '<span class="zone-counter">' + u.zoneCount + '</span>';
      h += '</span>';
    } else {
      h += '<span class="zone-badge">No Access</span>';
    }
    h += '</td>';
    
    // Actions
    h += '<td><div class="user-actions">';
    if(u.accessType === 'none') {
      h += '<button class="action-btn" onclick="addUser(' + u.id + ', \'choose\')">+ Add</button>';
    } else if(u.subscription === 'Pro add') {
      h += '<button class="action-btn remove" onclick="removeUser(' + u.id + ', \'Pro\')">‚úï Remove</button>';
    } else if(u.subscription === 'Starter') {
      h += '<button class="action-btn remove" onclick="removeUser(' + u.id + ', \'Starter\')">‚úï Remove</button>';
    }
    h += '</div></td>';
    
    h += '</tr>';
  }
  
  document.getElementById('users').innerHTML = h;
  updateButtonStates();
}

function toggleUser(id) {
  sel.users[id] = !sel.users[id];
  render();
}

function updateButtonStates() {
  var selectedUsers = [];
  var hasProUsers = false;
  var hasStarterUsers = false;
  var hasNoAccessUsers = false;
  
  for(var i = 0; i < data.users.length; i++) {
    if(sel.users[data.users[i].id]) {
      selectedUsers.push(data.users[i]);
      if(data.users[i].subscription === 'Pro') hasProUsers = true;
      if(data.users[i].subscription === 'Starter') hasStarterUsers = true;
      if(data.users[i].accessType === 'none') hasNoAccessUsers = true;
    }
  }
  
  // Pro buttons
  documensection buttons - only active when selecting no-access or pro users
  var addProBtn = document.getElementById('addProBtn');
  var modifyProBtn = document.getElementById('modifyProBtn');
  
  if(hasNoAccessUsers) {
    addProBtn.disabled = false;
    addProBtn.className = 'btn btn-primary';
  } else {
    addProBtn.disabled = true;
    addProBtn.className = 'btn btn-secondary';
  }
  
  if(hasProUsers) {
    modifyProBtn.disabled = false;
    modifyProBtn.className = 'btn btn-primary';
  } else {
    modifyProBtn.disabled = true;
    modifyProBtn.className = 'btn btn-secondary';
  }
  
  // Starter section buttons - only active when selecting no-access or starter users
  var addStarterBtn = document.getElementById('addStarterBtn');
  var modifyStarterBtn = document.getElementById('modifyStarterBtn');
  
  if(hasNoAccessUsers) {
    addStarterBtn.disabled = false;
    addStarterBtn.className = 'btn btn-primary';
  } else {
    addStarterBtn.disabled = true;
    addStarterBtn.className = 'btn btn-secondary';
  }
  
  if(hasStarterUsers) {
    modifyStarterBtn.disabled = false;
    modifyStarterBtn.className = 'btn btn-primary';
  } else {
    modifyStarterBtn.disabled = true;
    modifyStarterBtn.className = 'btn btn-secondary';
  }

function addUser(userId, subscription) {
  if(subscription === 'choose') {
    alert('In the full implementation, this would show a modal to choose between Pro and Starter subscription');
  } else {
    alert('Adding user to ' + subscription + ' subscription');
  }
}

function removeUser(userId, subscription) {
  if(confirm('Remove this user from ' + subscription + ' subscription?')) {
    var user = data.users.find(u => u.id === userId);
    if(user) {
      user.accessType = 'none';
      user.subscription = null;
      user.zoneCount = 0;
      render();
    }
  }
}

function openUserProfileDrawer(userName) {
  document.getElementById('userProfileName').textContent = userName;
  document.getElementById('userProfileDrawer').classList.add('show');
  document.getElementById('userProfileOverlay').classList.add('show');
  document.body.style.overflow = 'hidden';
}

function closeUserProfileDrawer() {
  document.getElementById('userProfileDrawer').classList.remove('show');
  document.getElementById('userProfileOverlay').classList.remove('show');
  document.body.style.overflow = 'auto';
}

render();
</script>

</body>
</html>
