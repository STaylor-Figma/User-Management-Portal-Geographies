<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bid Management - Subscriptions & Licenses</title>
<script src="https://kit.fontawesome.com/3d14c46c3e.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="blueprint-workflow-styles.css">
<link rel="stylesheet" href="blueprint-navigation.css">
<style>
/* Page-specific overrides for Blueprint Design System */

/* Content Area */
.content { padding: 0 20px; }

/* Tabs - Matches Figma exactly */
.tabs { display: flex; gap: 20px; border-bottom: 2px solid #dad8d7; margin-bottom: 20px; overflow: clip; padding-right: 10px; }
.tab { padding: 10px 2px; font-size: 14px; font-weight: 500; font-family: 'Montserrat', sans-serif; color: #1c1f22; background: none; border: none; border-bottom: 4px solid transparent; cursor: pointer; transition: none; line-height: 16px; }
.tab:hover { color: #1c1f22; }
.tab.active { font-weight: 700; border-bottom-color: #1c1f22; color: #1c1f22; font-family: 'Montserrat', sans-serif; }

/* Subscription Capacity Bar */
.capacity-section { display: flex; align-items: center; padding-right: 10px; flex-shrink: 0; width: 312px; }
.capacity-container { display: flex; flex-direction: column; width: 100%; }
.capacity-header { display: flex; justify-content: space-between; align-items: center; padding: 0 5px; margin-bottom: 5px; font-size: 12px; font-weight: 600; font-family: 'Montserrat', sans-serif; color: #1c1f22; line-height: 14px; }
.capacity-used { text-align: right; width: 80px; }
.capacity-bar { width: 100%; height: 20px; background: #feffff; border: 1px solid #dad8d7; border-radius: 15px; padding: 4px; position: relative; }
.capacity-fill { height: 100%; background: #00a1e0; border-radius: 100px; transition: width 0.3s ease; }

/* Table Controls - Matches Figma exactly */
.table-controls { display: flex; justify-content: space-between; align-items: flex-start; padding: 10px 0; }
.table-controls-left { display: flex; flex: 1; gap: 10px; align-items: flex-start; min-height: 1px; min-width: 1px; }
.filters { display: flex; gap: 10px; align-items: center; }
.filter-btn { padding: 8px; border: 1px solid #4a4f55; background: transparent; border-radius: 4px; font-size: 14px; font-weight: 500; font-family: 'Montserrat', sans-serif; color: #4a4f55; cursor: pointer; display: flex; flex-direction: column; gap: 3px; align-items: flex-start; height: 32px; justify-content: center; position: relative; }
.filter-btn::before { content: ''; position: absolute; inset: -1px; opacity: 0.1; }
.filter-btn-content { display: flex; gap: 6px; align-items: center; height: 16px; }
.filter-btn:hover { background: rgba(74, 79, 85, 0.05); }
.filter-btn i { font-size: 14px; line-height: 16px; }
.table-controls-right { display: flex; gap: 6px; align-items: flex-start; justify-content: flex-end; }
.search-btn { width: 32px; height: 32px; border: none; background: transparent; border-radius: 9999px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; padding: 3px; }
.search-btn:hover { background: #f0f0f0; }

/* Buttons - Using Blueprint Design System */
@import url('blueprint-button-styles.css');

/* BM Table - Matches Figma exactly */
.bm-table { width: 100%; border-collapse: collapse; background: #fff; }
.bm-table thead { background: #fff; position: sticky; top: 0; }
.bm-table thead tr { height: 40px; background: #fff; }
.bm-table th { text-align: left; padding: 10px; font-size: 12px; font-weight: 600; font-family: 'Montserrat', sans-serif; color: #4a4f55; line-height: 12px; position: relative; vertical-align: middle; }
.bm-table thead tr::after { content: ''; position: absolute; inset: 0; pointer-events: none; box-shadow: inset 0px -2px 0px 0px #4a4f55; }
.bm-table tbody tr { background: #fff; position: relative; height: 36px; }
.bm-table td { padding: 10px; font-size: 14px; font-family: 'Montserrat', sans-serif; font-weight: 500; color: #4a4f55; line-height: 16px; letter-spacing: -0.28px; vertical-align: top; }
.bm-table tbody tr::after { content: ''; position: absolute; inset: 0; pointer-events: none; box-shadow: inset 0px -1px 0px 0px #dad8d7; }
.bm-table tbody tr:hover { background: #f9f9f9; }

/* Checkbox Column */
.checkbox-cell { width: 34px; padding: 10px !important; vertical-align: top; }
.checkbox { width: 16px; height: 16px; cursor: pointer; margin: 0; }

/* User Name Column */
.user-name-cell { width: 192px; }
.user-name { display: flex; align-items: center; gap: 8px; white-space: nowrap; }
.user-link { color: #185a7d; text-decoration: underline; text-decoration-style: solid; font-size: 14px; font-weight: 500; cursor: pointer; font-family: 'Montserrat', sans-serif; line-height: 18px; white-space: nowrap; }
.user-link:hover { text-decoration: underline; }
.role-badge { display: inline-flex; padding: 4px 8px; color: #fff; border-radius: 4px; font-size: 12px; font-weight: 700; font-family: 'Montserrat', sans-serif; line-height: 14px; flex-shrink: 0; }
.role-badge.owner { background: #88888e; }
.role-badge.admin { background: #88888e; }

/* Access Badge */
.access-badge { display: inline-flex; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 700; font-family: 'Montserrat', sans-serif; line-height: 14px; }
.access-badge.bm { background: #00a651; color: white; }
.access-badge.requested { background: #4a4f55; color: white; }
.access-badge.na { background: transparent; color: #4a4f55; font-weight: 500; }

/* Status Badge */
.status-badge { display: inline-flex; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 700; font-family: 'Montserrat', sans-serif; line-height: 14px; border: none; }
.status-badge.active { background: #d4edda; color: #155724; }
.status-badge.inactive { background: #f5a623; color: #1c1f22; }
.status-badge.na { background: transparent; color: #4a4f55; font-weight: 500; }

/* Toggle Switch - Blueprint Design System */
.toggle-switch { position: relative; display: inline-block; width: 54px; height: 26px; }
.toggle-switch input { opacity: 0; width: 0; height: 0; position: absolute; }
.toggle-slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--neutral-400, #88888e); border-radius: var(--radius-xl, 9999px); transition: background-color 0.2s ease-in-out; padding: 3px; }
.toggle-slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: var(--neutral-0, white); border-radius: 50%; transition: transform 0.2s ease-in-out; }
.toggle-switch input:checked + .toggle-slider { background-color: var(--primary-400, #00a1e0); }
.toggle-switch input:checked + .toggle-slider:before { transform: translateX(28px); }
.toggle-switch input:disabled + .toggle-slider { opacity: var(--opacity-030, 0.3); cursor: not-allowed; }
.toggle-slider:hover { background-color: var(--neutral-500, #4a4f55); }
.toggle-switch input:checked + .toggle-slider:hover { background-color: var(--primary-600, #185a7d); }

/* Table Footer */
.table-footer { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-top: 1px solid #dad8d7; margin-top: 8px; }
.results-count { font-size: 14px; color: #4a4f55; display: flex; align-items: center; gap: 5px; font-family: 'Gotham', sans-serif; }
.results-count strong { font-weight: 700; }
.pagination-controls { display: flex; gap: 20px; align-items: center; }
.rows-per-page { display: flex; align-items: center; gap: 6px; font-size: 14px; color: #4a4f55; font-family: 'Gotham', sans-serif; }
.rows-select { padding: 7px 10px; border: 1px solid #dad8d7; border-radius: 4px; font-size: 14px; color: #88888e; font-style: italic; font-family: 'Gotham', sans-serif; background: #fff; width: 112px; }
.page-nav { display: flex; align-items: center; gap: 6px; }
.page-info { font-size: 14px; color: #4a4f55; font-family: 'Gotham', sans-serif; }
.page-btn { width: 32px; height: 32px; border: none; background: none; cursor: pointer; font-size: 18px; color: #4a4f55; border-radius: 50%; padding: 10px; display: flex; align-items: center; justify-content: center; }
.page-btn:disabled { opacity: 0.3; cursor: not-allowed; }
.page-btn:not(:disabled):hover { background: #f0f0f0; }
</style>
</head>
<body>

<!-- Top Bar - Desktop/Tablet Responsive -->
<div class="top-bar">
  <div class="top-bar-left">
    <button class="hamburger-menu" onclick="toggleMobileNav()" aria-label="Toggle navigation">
      <div class="menu-icon">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </button>
    <div class="logo">ConstructConnect</div>
  </div>
  <div class="top-bar-user-section">
    <div class="user-menu">
      <div class="avatar">CD</div>
      <span>Christopher Donaldson</span>
    </div>
  </div>
</div>

<!-- Mobile Navigation Overlay -->
<div class="compact-overlay" onclick="toggleMobileNav()"></div>

<!-- Compact Navigation (Tablet/Mobile â‰¤1024px) -->
<nav class="compact-nav" aria-label="Main navigation">
  <button class="compact-button">
    <i class="compact-button__icon fa-light fa-user"></i>
    <span class="compact-button__label">My Profile</span>
  </button>
  <button class="compact-button">
    <i class="compact-button__icon fa-light fa-building"></i>
    <span class="compact-button__label">Company</span>
  </button>
  <button class="compact-button">
    <i class="compact-button__icon fa-light fa-users"></i>
    <span class="compact-button__label">Users & Groups</span>
  </button>
  <button class="compact-button" onclick="window.location.href='v2-user-roles.html'">
    <i class="compact-button__icon fa-light fa-users-gear"></i>
    <span class="compact-button__label">User Roles</span>
  </button>
  <button class="compact-button selected">
    <i class="compact-button__icon fa-light fa-file-invoice"></i>
    <span class="compact-button__label">Subs & Licenses</span>
  </button>
  <button class="compact-button">
    <i class="compact-button__icon fa-light fa-money-check-edit-alt"></i>
    <span class="compact-button__label">Billing</span>
  </button>
</nav>

<!-- Layout -->
<div class="layout">
  
  <!-- Sidebar Navigation (Desktop >1024px) -->
  <nav class="sidebar-nav" aria-label="Main navigation">
    <button class="sidebar-button">
      <i class="sidebar-button__icon fa-light fa-user"></i>
      <span class="sidebar-button__label">My<br>Profile</span>
    </button>
    <button class="sidebar-button">
      <i class="sidebar-button__icon fa-light fa-building"></i>
      <span class="sidebar-button__label">Company</span>
    </button>
    <button class="sidebar-button">
      <i class="sidebar-button__icon fa-light fa-users"></i>
      <span class="sidebar-button__label">Users &<br>Groups</span>
    </button>
    <button class="sidebar-button" onclick="window.location.href='v2-user-roles.html'">
      <i class="sidebar-button__icon fa-light fa-users-gear"></i>
      <span class="sidebar-button__label">User<br>Roles</span>
    </button>
    <button class="sidebar-button selected">
      <i class="sidebar-button__icon fa-light fa-file-invoice"></i>
      <span class="sidebar-button__label">Subs &<br>Licenses</span>
    </button>
    <button class="sidebar-button">
      <i class="sidebar-button__icon fa-light fa-money-check-edit-alt"></i>
      <span class="sidebar-button__label">Billing</span>
    </button>
  </nav>

  <!-- Main Content -->
  <div class="main-content">
    <div class="container">
      
      <!-- Header & Tabs -->
      <div class="header">
        <div class="header-top">
          <h1>Subscriptions & Licenses</h1>
          <div class="header-icons">
            <button class="icon-btn">
              <i class="fa-solid fa-user-plus"></i>
              <span class="tooltip">Invite User</span>
            </button>
            <button class="icon-btn">
              <i class="fa-solid fa-clock-rotate-left"></i>
              <span class="tooltip">History</span>
            </button>
            <button class="icon-btn">
              <i class="fa-solid fa-ellipsis"></i>
              <span class="tooltip">More</span>
            </button>
          </div>
        </div>

        <!-- Tabs -->
        <div class="tabs">
          <button class="tab" onclick="window.location.href='v2-subscription-overview.html'">Organization Overview</button>
          <button class="tab" onclick="window.location.href='v2-modify-users-workflow.html'">Project Intelligence</button>
          <button class="tab active">Bid Management</button>
          <button class="tab">Takeoff & Estimating</button>
        </div>
      </div>

      <div class="content">
        <!-- Page Content -->
        <div class="page-content">
        <!-- Table Controls -->
        <div class="table-controls">
          <div class="table-controls-left">
            <!-- Subscription Capacity Bar -->
            <div class="capacity-section">
              <div class="capacity-container">
                <div class="capacity-header">
                  <span>Bid Management Seats</span>
                  <span class="capacity-used">4/20 Used</span>
                </div>
                <div class="capacity-bar">
                  <div class="capacity-fill" style="width: 20%;"></div>
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="filters">
              <button class="btn-primary" id="authorizeBtn" disabled>Authorize</button>
              <button class="btn-secondary" id="deauthorizeBtn" disabled>Deauthorize</button>
              <button class="filter-btn">
                <div class="filter-btn-content">
                  <span>All Bid Management Roles</span>
                  <i class="fa-regular fa-chevron-down"></i>
                </div>
              </button>
            </div>
          </div>

          <div class="table-controls-right">
            <button class="search-btn">
              <i class="fa-regular fa-search"></i>
            </button>
            <button class="btn-default">Subscription Details</button>
          </div>
        </div>

        <!-- User Assignment Table -->
        <div class="table-container">
          <table class="bm-table">
            <thead>
              <tr>
                <th class="checkbox-cell"><input type="checkbox" class="checkbox" id="selectAll"></th>
                <th class="user-name-cell">User Name</th>
                <th>Bid Management Role</th>
                <th>Access</th>
                <th>User Status</th>
                <th>Authorized</th>
              </tr>
            </thead>
            <tbody>
              <!-- Row 1: Malcom Reynolds - OWNER, No BM Access -->
              <tr>
                <td class="checkbox-cell"><input type="checkbox" class="checkbox row-checkbox"></td>
                <td class="user-name-cell">
                  <div class="user-name">
                    <a href="#" class="user-link">Malcom Reynolds</a>
                    <span class="role-badge owner">OWNER</span>
                  </div>
                </td>
                <td>-</td>
                <td><span class="access-badge na">N/A</span></td>
                <td><span class="status-badge na">N/A</span></td>
                <td>
                  <label class="toggle-switch">
                    <input type="checkbox" class="toggle-input">
                    <span class="toggle-slider"></span>
                  </label>
                </td>
              </tr>

              <!-- Row 2: River Tam - OWNER, Bid Coordinator, Active -->
              <tr>
                <td class="checkbox-cell"><input type="checkbox" class="checkbox row-checkbox"></td>
                <td class="user-name-cell">
                  <div class="user-name">
                    <a href="#" class="user-link">River Tam</a>
                    <span class="role-badge owner">OWNER</span>
                  </div>
                </td>
                <td>Bid Coordinator</td>
                <td><span class="access-badge bm">BM</span></td>
                <td><span class="status-badge active">Active</span></td>
                <td>
                  <label class="toggle-switch">
                    <input type="checkbox" class="toggle-input" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </td>
              </tr>

              <!-- Row 3: Zoe Washburne - ADMIN, Estimator, Active -->
              <tr>
                <td class="checkbox-cell"><input type="checkbox" class="checkbox row-checkbox"></td>
                <td class="user-name-cell">
                  <div class="user-name">
                    <a href="#" class="user-link">Zoe Washburne</a>
                    <span class="role-badge admin">ADMIN</span>
                  </div>
                </td>
                <td>Estimator</td>
                <td><span class="access-badge bm">BM</span></td>
                <td><span class="status-badge active">Active</span></td>
                <td>
                  <label class="toggle-switch">
                    <input type="checkbox" class="toggle-input" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </td>
              </tr>

              <!-- Row 4: Kaylee Frye - Estimator, Inactive -->
              <tr>
                <td class="checkbox-cell"><input type="checkbox" class="checkbox row-checkbox"></td>
                <td class="user-name-cell">
                  <div class="user-name">
                    <a href="#" class="user-link">Kaylee Frye</a>
                  </div>
                </td>
                <td>Estimator</td>
                <td><span class="access-badge bm">BM</span></td>
                <td><span class="status-badge inactive">Inactive</span></td>
                <td>
                  <label class="toggle-switch">
                    <input type="checkbox" class="toggle-input" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </td>
              </tr>

              <!-- Row 5: Simon Tam - Team Member, Active -->
              <tr>
                <td class="checkbox-cell"><input type="checkbox" class="checkbox row-checkbox"></td>
                <td class="user-name-cell">
                  <div class="user-name">
                    <a href="#" class="user-link">Simon Tam</a>
                  </div>
                </td>
                <td>Team Member</td>
                <td><span class="access-badge bm">BM</span></td>
                <td><span class="status-badge active">Active</span></td>
                <td>
                  <label class="toggle-switch">
                    <input type="checkbox" class="toggle-input" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </td>
              </tr>

              <!-- Row 6: Jayne Cobb - Requested Access -->
              <tr>
                <td class="checkbox-cell"><input type="checkbox" class="checkbox row-checkbox"></td>
                <td class="user-name-cell">
                  <div class="user-name">
                    <a href="#" class="user-link">Jayne Cobb</a>
                  </div>
                </td>
                <td>-</td>
                <td><span class="access-badge requested">Requested</span></td>
                <td><span class="status-badge na">N/A</span></td>
                <td>
                  <label class="toggle-switch">
                    <input type="checkbox" class="toggle-input">
                    <span class="toggle-slider"></span>
                  </label>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Table Footer -->
        <div class="table-footer">
          <div class="results-count">
            <strong>6</strong> Results Found
          </div>
          <div class="pagination-controls">
            <div class="rows-per-page">
              <span>Rows per page</span>
              <select class="rows-select">
                <option value="10">10</option>
                <option value="25">25</option>
                <option value="50" selected>50</option>
                <option value="100">100</option>
              </select>
            </div>
            <div class="page-nav">
              <span class="page-info">1-6 of 6</span>
              <button class="page-btn" disabled><i class="fa-regular fa-chevron-left"></i></button>
              <button class="page-btn" disabled><i class="fa-regular fa-chevron-right"></i></button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Toggle mobile navigation
function toggleMobileNav() {
  const menu = document.querySelector('.hamburger-menu');
  const nav = document.querySelector('.compact-nav');
  const overlay = document.querySelector('.compact-overlay');
  
  menu.classList.toggle('active');
  nav.classList.toggle('show');
  overlay.classList.toggle('show');
}

// Select All Checkbox
document.getElementById('selectAll').addEventListener('change', function(e) {
  const checkboxes = document.querySelectorAll('.row-checkbox');
  checkboxes.forEach(cb => cb.checked = e.target.checked);
  updateActionButtons();
});

// Row Checkboxes
document.querySelectorAll('.row-checkbox').forEach(cb => {
  cb.addEventListener('change', updateActionButtons);
});

// Update Authorize/Deauthorize button states
function updateActionButtons() {
  const selected = Array.from(document.querySelectorAll('.row-checkbox:checked'));
  const authorizeBtn = document.getElementById('authorizeBtn');
  const deauthorizeBtn = document.getElementById('deauthorizeBtn');
  
  // Enable Authorize if any unchecked toggles are selected
  const canAuthorize = selected.some(cb => {
    const row = cb.closest('tr');
    const toggle = row.querySelector('.toggle-input');
    return !toggle.checked;
  });
  
  // Enable Deauthorize if any checked toggles are selected
  const canDeauthorize = selected.some(cb => {
    const row = cb.closest('tr');
    const toggle = row.querySelector('.toggle-input');
    return toggle.checked;
  });
  
  authorizeBtn.disabled = !canAuthorize;
  deauthorizeBtn.disabled = !canDeauthorize;
}

// Toggle switches
document.querySelectorAll('.toggle-input').forEach(toggle => {
  toggle.addEventListener('change', function() {
    // Update capacity bar
    const totalSeats = 20;
    const usedSeats = document.querySelectorAll('.toggle-input:checked').length;
    const percentage = (usedSeats / totalSeats) * 100;
    
    document.querySelector('.capacity-used').textContent = `${usedSeats}/${totalSeats} Used`;
    document.querySelector('.capacity-fill').style.width = `${percentage}%`;
    
    // Update access and status badges
    const row = this.closest('tr');
    const accessBadge = row.querySelector('.access-badge');
    const statusBadge = row.querySelector('.status-badge');
    
    if (this.checked) {
      // Authorized
      accessBadge.className = 'access-badge bm';
      accessBadge.textContent = 'BM';
      statusBadge.className = 'status-badge active';
      statusBadge.textContent = 'Active';
    } else {
      // Deauthorized
      accessBadge.className = 'access-badge na';
      accessBadge.textContent = 'N/A';
      statusBadge.className = 'status-badge na';
      statusBadge.textContent = 'N/A';
    }
  });
});

// Initialize button states
updateActionButtons();
</script>

</body>
</html>
