<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>User Roles - Version Two</title>
<script src="https://kit.fontawesome.com/3d14c46c3e.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="blueprint-workflow-styles.css">
<link rel="stylesheet" href="blueprint-navigation.css">
<link rel="stylesheet" href="blueprint-button-styles.css">
<style>
/* Page-specific overrides for Blueprint Design System */

/* Content Area */
.content { padding: 0 20px; }

/* Tabs - Matches Figma exactly */
.tabs { display: flex; gap: 20px; border-bottom: 2px solid #dad8d7; margin-bottom: 10px; overflow: clip; padding-right: 10px; }
.tab { padding: 10px 2px; font-size: 14px; font-weight: 500; font-family: 'Montserrat', sans-serif; color: #1c1f22; background: none; border: none; border-bottom: 4px solid transparent; cursor: pointer; transition: none; line-height: 16px; }
.tab:hover { color: #1c1f22; }
.tab.active { font-weight: 700; border-bottom-color: #1c1f22; color: #1c1f22; font-family: 'Montserrat', sans-serif; }

/* Toast Message - Matches Figma exactly */
.toast { position: relative; display: flex; align-items: flex-start; gap: 10px; padding: 12px 20px; background: #e6f7ff; border-radius: 0; margin: 0 -20px 10px -20px; min-height: 42px; }
.toast-icon { font-size: 18px; color: #00a1e0; line-height: 18px; flex-shrink: 0; }
.toast-text { flex: 1; font-size: 12px; font-weight: 600; font-family: 'Montserrat', sans-serif; color: #1c1f22; line-height: 14px; }

/* Table Controls - Matches Figma exactly */
.table-controls { display: flex; justify-content: space-between; align-items: flex-start; padding: 10px 0; }
.table-controls-left { display: flex; flex: 1; gap: 10px; align-items: flex-start; min-height: 1px; min-width: 1px; }
.filters { display: flex; gap: 10px; align-items: center; }
.filter-btn { padding: 8px; border: 1px solid #4a4f55; background: transparent; border-radius: 4px; font-size: 14px; font-weight: 500; font-family: 'Montserrat', sans-serif; color: #4a4f55; cursor: pointer; display: flex; flex-direction: column; gap: 3px; align-items: flex-start; height: 32px; justify-content: center; position: relative; }
.filter-btn::before { content: ''; position: absolute; inset: -1px; opacity: 0.1; }
.filter-btn-content { display: flex; gap: 6px; align-items: center; height: 16px; }
.filter-btn:hover { background: rgba(74, 79, 85, 0.05); }
.filter-btn i { font-size: 14px; line-height: 16px; }
.table-controls-right { display: flex; gap: 6px; align-items: flex-start; justify-content: flex-end; }
.search-btn { width: 32px; height: 32px; border: none; background: transparent; border-radius: 9999px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; padding: 3px; }
.search-btn:hover { background: #f0f0f0; }

/* Roles Table - Matches Figma exactly */
.roles-table { width: 100%; border-collapse: collapse; background: #fff; }
.roles-table thead { background: #fff; position: sticky; top: 0; }
.roles-table thead tr { height: 40px; background: #fff; }
.roles-table th { text-align: left; padding: 10px; font-size: var(--font-size-200, 12px); font-weight: var(--font-weight-text-semi-bold, 600); font-family: var(--font-family-blueprintfont, 'Montserrat', sans-serif); color: #4a4f55; line-height: var(--line-height-xsmall, 12px); position: relative; }
.roles-table thead tr::after { content: ''; position: absolute; inset: 0; pointer-events: none; box-shadow: inset 0px -2px 0px 0px #4a4f55; }
.roles-table tbody tr { background: #fff; position: relative; }
.roles-table td { padding: 10px; font-size: var(--content-body-font-size, 14px); font-family: var(--content-body-font-family, 'Montserrat', sans-serif); font-weight: var(--content-body-font-weight, 500); color: #4a4f55; line-height: var(--content-body-line-height, 16px); vertical-align: top; }
.roles-table tbody tr::after { content: ''; position: absolute; inset: 0; pointer-events: none; box-shadow: inset 0px -1px 0px 0px #dad8d7; }
.roles-table tbody tr:hover { background: #f9f9f9; }

/* Role Name Cell */
.role-name { display: flex; flex-direction: column; gap: 4px; }
.role-name-row { display: flex; align-items: center; gap: 8px; }
.role-link { color: #1c1f22; text-decoration: none; font-size: var(--content-body-font-size, 14px); font-weight: var(--content-body-font-weight, 500); cursor: pointer; font-family: var(--content-body-font-family, 'Montserrat', sans-serif); line-height: var(--content-body-line-height, 16px); }
.role-link:hover { text-decoration: underline; }
.role-warning { display: flex; align-items: flex-start; gap: 4px; font-size: var(--content-caption-font-size, 12px); color: #d32f2f; font-family: var(--content-caption-font-family, 'Montserrat', sans-serif); font-weight: var(--content-caption-font-weight, 600); line-height: var(--content-caption-line-height, 14px); }
.role-warning i { font-size: 12px; }
.role-success { display: flex; align-items: center; gap: 4px; font-size: var(--content-caption-font-size, 12px); color: #00a365; font-family: var(--content-caption-font-family, 'Montserrat', sans-serif); font-weight: var(--content-caption-font-weight, 600); line-height: var(--content-caption-line-height, 14px); }
.role-success i { font-size: 12px; }
.role-based-on { display: flex; align-items: center; gap: 4px; font-size: var(--content-caption-font-size, 12px); color: #7b2cbf; font-family: var(--content-caption-font-family, 'Montserrat', sans-serif); font-weight: var(--content-caption-font-weight, 600); line-height: var(--content-caption-line-height, 14px); }
.role-based-on i { font-size: 12px; }
.role-badge { display: inline-flex; padding: 4px 8px; color: #fff; border-radius: 4px; font-size: var(--content-caption-font-size, 12px); font-weight: var(--font-weight-text-bold, 700); font-family: var(--content-caption-font-family, 'Montserrat', sans-serif); line-height: var(--content-caption-line-height, 14px); }
.role-badge.owner { background: #88888e; }
.role-badge.admin { background: #88888e; }
.role-badge.bm { background: #00a365; }
.role-badge.ost { background: #00a365; }

/* Role Type Badge */
.role-type-badge { display: inline-flex; padding: 4px 8px; border-radius: 4px; font-size: var(--content-caption-font-size, 12px); font-weight: var(--font-weight-text-bold, 700); font-family: var(--content-caption-font-family, 'Montserrat', sans-serif); line-height: var(--content-caption-line-height, 14px); }
.role-type-badge.standard { background: #88888e; color: #fff; }
.role-type-badge.custom { background: #7b2cbf; color: #fff; }

/* Permission Lists */
.permission-list { list-style: none; padding: 0; margin: 0; }
.permission-item { display: flex; align-items: center; gap: 6px; margin-bottom: 6px; font-size: var(--content-caption-font-size, 12px); font-family: var(--content-caption-font-family, 'Montserrat', sans-serif); font-weight: var(--content-caption-font-weight, 600); line-height: var(--content-caption-line-height, 14px); }
.permission-item:last-child { margin-bottom: 0; }
.permission-circle { width: 12px; height: 12px; border-radius: 50%; flex-shrink: 0; border: 2px solid; display: flex; align-items: center; justify-content: center; }
.permission-circle.granted { border-color: #00a365; background: transparent; }
.permission-circle.denied { border-color: #d32f2f; background: transparent; position: relative; }
.permission-circle.denied::after { content: ''; position: absolute; width: 6px; height: 2px; background: #d32f2f; }

/* Action Buttons */
.action-buttons { display: flex; gap: 2px; }
.action-btn { padding: 8px; background: #e7e6e5; color: #4a4f55; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 700; font-family: 'Montserrat', sans-serif; height: 32px; line-height: 16px; transition: background 0.2s; }
.action-btn:hover { background: #d0cfce; }
.action-btn:disabled { opacity: 0.5; cursor: not-allowed; }

/* Table Footer */
.table-footer { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-top: 1px solid #dad8d7; margin-top: 8px; }
.results-count { font-size: 14px; color: #4a4f55; display: flex; align-items: center; gap: 5px; }
.results-count strong { font-weight: 700; }
.rows-per-page { display: flex; align-items: center; gap: 8px; font-size: 14px; color: #4a4f55; }
.rows-select { padding: 7px 10px; border: 1px solid #dad8d7; border-radius: 4px; font-size: 14px; color: #88888e; font-style: italic; font-family: var(--font-family-blueprintfont, 'Montserrat', sans-serif); background: #fff; }
.page-nav { display: flex; align-items: center; gap: 8px; }
.page-info { font-size: 14px; color: #4a4f55; }
.page-btn { width: 32px; height: 32px; border: none; background: none; cursor: pointer; font-size: 18px; color: #4a4f55; border-radius: 50%; }
.page-btn:disabled { opacity: 0.3; cursor: not-allowed; }
.page-btn:not(:disabled):hover { background: #f0f0f0; }

/* Tab Content */
.tab-content { display: none; }
.tab-content.active { display: block; }

/* Hamburger Menu Button */
.hamburger-menu { display: none; width: 44px; height: 44px; padding: 10px; align-items: center; justify-content: center; background: #01304a; border: none; border-right: 1px solid #185a7d; cursor: pointer; }
.menu-icon { width: 16px; height: 16px; position: relative; display: flex; flex-direction: column; justify-content: space-between; }
.hamburger-menu span { display: block; width: 16px; height: 3px; background: #fff; border-radius: 4px; transition: transform 0.3s ease, opacity 0.3s ease; transform-origin: center; }
.hamburger-menu.active span:nth-child(1) { transform: translateY(6px) rotate(45deg); }
.hamburger-menu.active span:nth-child(2) { opacity: 0; }
.hamburger-menu.active span:nth-child(3) { transform: translateY(-6px) rotate(-45deg); }

/* ============================================ */
/* RESPONSIVE / ADAPTIVE DESIGN - Blueprint Component Library */
/* Breakpoints: 375px (Mobile), 600px (Tablet Small), 768px (Tablet), 1024px (Tablet Landscape), 1440px+ (Desktop) */
/* ============================================ */

/* Tablet Landscape - Below 1024px */
@media (max-width: 1024px) {
  .hamburger-menu { display: block; }
  .sidebar { display: none; }
}

/* Tablet (Medium) - Below 768px */
@media (max-width: 768px) {
  .hamburger-menu { display: block; }
  .sidebar { display: none; }
  .content { padding: 0 10px; }
  .tabs { flex-wrap: wrap; gap: 8px; }
  .tab { font-size: 13px; padding: 8px 6px; }
  .table-controls { flex-direction: column; align-items: stretch; gap: 12px; }
  .filters { flex-wrap: wrap; }
  .roles-table { min-width: 800px; }
  .table-section { overflow-x: auto; }
}

/* Tablet Small - Below 600px */
@media (max-width: 600px) {
  .main-content { padding: 12px; }
  .header { padding: 12px; }
  h1 { font-size: 18px; }
  .toast { font-size: 11px; padding: 8px; }
  .roles-table th,
  .roles-table td { padding: 8px 6px; font-size: 12px; }
  .table-footer { flex-direction: column; align-items: stretch; gap: 12px; }
  .rows-per-page { justify-content: center; }
  .page-nav { justify-content: center; }
}

/* Mobile (Extra Small) - Below 375px */
@media (max-width: 375px) {
  h1 { font-size: 16px; }
  .tabs { gap: 4px; }
  .tab { font-size: 12px; padding: 6px 10px; }
  .filter-btn { font-size: 12px; padding: 6px 10px; }
}

/* ============================================ */
/* MODAL SYSTEM - Blueprint Design System */
/* ============================================ */

/* Modal Overlay */
.modal-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 9998;
  align-items: center;
  justify-content: center;
}

.modal-overlay.active {
  display: flex;
}

/* Modal Container */
.modal {
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  max-width: 90vw;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  position: relative;
  z-index: 9999;
}

.modal.small { width: 400px; }
.modal.medium { width: 600px; }
.modal.large { width: 800px; }
.modal.xlarge { width: 1000px; }

/* Modal Header */
.modal-header {
  padding: 20px 24px;
  border-bottom: 1px solid #dad8d7;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-shrink: 0;
}

.modal-title {
  font-family: 'Montserrat', sans-serif;
  font-size: 20px;
  font-weight: 600;
  color: #1c1f22;
  margin: 0;
}

.modal-close {
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #4a4f55;
  font-size: 20px;
}

.modal-close:hover {
  background: #f0f0f0;
}

/* Modal Body */
.modal-body {
  padding: 24px;
  overflow-y: auto;
  flex: 1;
}

.modal-body-section {
  margin-bottom: 24px;
}

.modal-body-section:last-child {
  margin-bottom: 0;
}

.modal-section-title {
  font-family: 'Montserrat', sans-serif;
  font-size: 14px;
  font-weight: 700;
  color: #1c1f22;
  margin-bottom: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Modal Footer */
.modal-footer {
  padding: 16px 24px;
  border-top: 1px solid #dad8d7;
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  flex-shrink: 0;
}

/* Form Elements in Modals */
.form-group {
  margin-bottom: 20px;
}

.form-group:last-child {
  margin-bottom: 0;
}

.form-label {
  display: block;
  font-family: 'Montserrat', sans-serif;
  font-size: 14px;
  font-weight: 600;
  color: #4a4f55;
  margin-bottom: 8px;
}

.form-input {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #dad8d7;
  border-radius: 4px;
  font-family: 'Montserrat', sans-serif;
  font-size: 14px;
  color: #1c1f22;
}

.form-input:focus {
  outline: none;
  border-color: #00a1e0;
  box-shadow: 0 0 0 3px rgba(0, 161, 224, 0.1);
}

.form-select {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #dad8d7;
  border-radius: 4px;
  font-family: 'Montserrat', sans-serif;
  font-size: 14px;
  color: #1c1f22;
  background: #fff;
}

.form-help {
  font-family: 'Montserrat', sans-serif;
  font-size: 12px;
  color: #88888e;
  margin-top: 6px;
}

/* Role Option Cards */
.role-options {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.role-option {
  padding: 12px 16px;
  border: 2px solid #dad8d7;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s;
}

.role-option:hover {
  border-color: #00a1e0;
  background: #f2fafe;
}

.role-option.selected {
  border-color: #00a1e0;
  background: #e6f7ff;
}

.role-option-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 4px;
}

.role-option-name {
  font-family: 'Montserrat', sans-serif;
  font-size: 14px;
  font-weight: 600;
  color: #1c1f22;
}

.role-option-desc {
  font-family: 'Montserrat', sans-serif;
  font-size: 12px;
  color: #4a4f55;
  line-height: 1.4;
}

.role-option-note {
  margin-top: 6px;
  padding: 8px;
  background: #fff3cd;
  border-left: 3px solid #f5a623;
  font-family: 'Montserrat', sans-serif;
  font-size: 12px;
  color: #856404;
  font-style: italic;
}

/* Permission Lists in Modals */
.permission-group {
  margin-bottom: 20px;
}

.permission-group-title {
  font-family: 'Montserrat', sans-serif;
  font-size: 13px;
  font-weight: 700;
  color: #4a4f55;
  margin-bottom: 10px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.permission-items {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.permission-detail {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 8px 12px;
  background: #f9f9f9;
  border-radius: 4px;
}

.permission-access {
  padding: 2px 8px;
  border-radius: 3px;
  font-family: 'Montserrat', sans-serif;
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  flex-shrink: 0;
}

.permission-access.view { background: #e0f2ff; color: #0066cc; }
.permission-access.edit { background: #d4edda; color: #155724; }
.permission-access.create { background: #cfe2ff; color: #004085; }
.permission-access.delete { background: #f8d7da; color: #721c24; }
.permission-access.approve { background: #d1ecf1; color: #0c5460; }

.permission-name {
  flex: 1;
  font-family: 'Montserrat', sans-serif;
  font-size: 13px;
  color: #1c1f22;
}

/* User Lists in Modals */
.user-list {
  max-height: 300px;
  overflow-y: auto;
  border: 1px solid #dad8d7;
  border-radius: 4px;
}

.user-list-item {
  padding: 12px 16px;
  border-bottom: 1px solid #dad8d7;
  display: flex;
  align-items: center;
  gap: 12px;
}

.user-list-item:last-child {
  border-bottom: none;
}

.user-list-item:hover {
  background: #f9f9f9;
}

.user-list-checkbox {
  flex-shrink: 0;
}

.user-list-info {
  flex: 1;
}

.user-list-name {
  font-family: 'Montserrat', sans-serif;
  font-size: 14px;
  font-weight: 500;
  color: #1c1f22;
  margin-bottom: 2px;
}

.user-list-email {
  font-family: 'Montserrat', sans-serif;
  font-size: 12px;
  color: #88888e;
}

/* Warning/Info Boxes in Modals */
.modal-warning {
  padding: 12px 16px;
  background: #fff3cd;
  border-left: 4px solid #f5a623;
  border-radius: 4px;
  margin-bottom: 20px;
}

.modal-warning-title {
  font-family: 'Montserrat', sans-serif;
  font-size: 14px;
  font-weight: 700;
  color: #856404;
  margin-bottom: 6px;
}

.modal-warning-text {
  font-family: 'Montserrat', sans-serif;
  font-size: 13px;
  color: #856404;
  line-height: 1.4;
}

.modal-info {
  padding: 12px 16px;
  background: #d1ecf1;
  border-left: 4px solid: #0c5460;
  border-radius: 4px;
  margin-bottom: 20px;
}

.modal-info-text {
  font-family: 'Montserrat', sans-serif;
  font-size: 13px;
  color: #0c5460;
  line-height: 1.4;
}

/* Permission Impact Display */
.permission-impact {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-top: 16px;
}

.impact-column {
  padding: 16px;
  border-radius: 4px;
}

.impact-column.losing {
  background: #f8d7da;
  border: 1px solid #f5c6cb;
}

.impact-column.gaining {
  background: #d4edda;
  border: 1px solid #c3e6cb;
}

.impact-title {
  font-family: 'Montserrat', sans-serif;
  font-size: 13px;
  font-weight: 700;
  margin-bottom: 10px;
  text-transform: uppercase;
}

.impact-column.losing .impact-title {
  color: #721c24;
}

.impact-column.gaining .impact-title {
  color: #155724;
}

.impact-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.impact-list li {
  font-family: 'Montserrat', sans-serif;
  font-size: 13px;
  padding: 4px 0 4px 20px;
  position: relative;
}

.impact-column.losing .impact-list li {
  color: #721c24;
}

.impact-column.gaining .impact-list li {
  color: #155724;
}

.impact-list li:before {
  position: absolute;
  left: 0;
  font-family: 'Font Awesome 6 Pro';
  font-weight: 900;
}

.impact-column.losing .impact-list li:before {
  content: '\f00d';
  color: #d32f2f;
}

.impact-column.gaining .impact-list li:before {
  content: '\f00c';
  color: #00a365;
}

/* Callout Box */
.callout-box {
  padding: 16px;
  background: #e6f7ff;
  border: 2px solid #00a1e0;
  border-radius: 6px;
  margin: 16px 0;
}

.callout-box strong {
  display: block;
  font-family: 'Montserrat', sans-serif;
  font-size: 14px;
  font-weight: 700;
  color: #004d73;
  margin-bottom: 8px;
}

.callout-box p {
  font-family: 'Montserrat', sans-serif;
  font-size: 13px;
  color: #004d73;
  line-height: 1.5;
  margin: 0;
}

/* Summary List */
.summary-list {
  background: #f9f9f9;
  border: 1px solid #dad8d7;
  border-radius: 4px;
  padding: 16px;
}

.summary-item {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  border-bottom: 1px solid #dad8d7;
  font-family: 'Montserrat', sans-serif;
  font-size: 14px;
}

.summary-item:last-child {
  border-bottom: none;
}

.summary-label {
  color: #4a4f55;
  font-weight: 500;
}

.summary-value {
  color: #1c1f22;
  font-weight: 600;
}
</style>
</head>
<body>

<!-- Top Bar - Desktop/Tablet Responsive -->
<div class="top-bar">
  <div class="top-bar-left">
    <button class="hamburger-menu" onclick="toggleMobileNav()" aria-label="Toggle navigation">
      <div class="menu-icon">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </button>
    <div class="logo">ConstructConnect</div>
  </div>
  <div class="top-bar-user-section">
    <div class="user-menu">
      <div class="avatar">CD</div>
      <span>Christopher Donaldson</span>
    </div>
  </div>
</div>

<!-- Mobile Navigation Overlay -->
<div class="compact-overlay" onclick="toggleMobileNav()"></div>

<!-- Compact Navigation (Tablet/Mobile ≤1024px) -->
<nav class="compact-nav" aria-label="Main navigation">
  <button class="compact-button" onclick="window.location.href='v2-my-profile.html'">
    <i class="compact-button__icon fa-light fa-user"></i>
    <span class="compact-button__label">My Profile</span>
  </button>
  <button class="compact-button" onclick="window.location.href='v2-company-overview.html'">
    <i class="compact-button__icon fa-light fa-building"></i>
    <span class="compact-button__label">Company</span>
  </button>
  <button class="compact-button" onclick="window.location.href='v2-users-groups.html'">
    <i class="compact-button__icon fa-light fa-users"></i>
    <span class="compact-button__label">Users & Groups</span>
  </button>
  <button class="compact-button selected">
    <i class="compact-button__icon fa-light fa-users-gear"></i>
    <span class="compact-button__label">User Roles</span>
  </button>
  <button class="compact-button" onclick="window.location.href='v2-subscription-overview.html'">
    <i class="compact-button__icon fa-light fa-file-invoice"></i>
    <span class="compact-button__label">Subs & Licenses</span>
  </button>
  <button class="compact-button">
    <i class="compact-button__icon fa-light fa-money-check-edit-alt"></i>
    <span class="compact-button__label">Billing</span>
  </button>
</nav>

<!-- Layout -->
<div class="layout">
  
  <!-- Sidebar Navigation (Desktop >1024px) -->
  <nav class="sidebar-nav" aria-label="Main navigation">
    <button class="sidebar-button" onclick="window.location.href='v2-my-profile.html'">
      <i class="sidebar-button__icon fa-light fa-user"></i>
      <span class="sidebar-button__label">My<br>Profile</span>
    </button>
    <button class="sidebar-button" onclick="window.location.href='v2-company-overview.html'">
      <i class="sidebar-button__icon fa-light fa-building"></i>
      <span class="sidebar-button__label">Company</span>
    </button>
    <button class="sidebar-button" onclick="window.location.href='v2-users-groups.html'">
      <i class="sidebar-button__icon fa-light fa-users"></i>
      <span class="sidebar-button__label">Users &<br>Groups</span>
    </button>
    <button class="sidebar-button selected">
      <i class="sidebar-button__icon fa-light fa-users-gear"></i>
      <span class="sidebar-button__label">User<br>Roles</span>
    </button>
    <button class="sidebar-button" onclick="window.location.href='v2-subscription-overview.html'">
      <i class="sidebar-button__icon fa-light fa-file-invoice"></i>
      <span class="sidebar-button__label">Subs &<br>Licenses</span>
    </button>
    <button class="sidebar-button">
      <i class="sidebar-button__icon fa-light fa-money-check-edit-alt"></i>
      <span class="sidebar-button__label">Billing</span>
    </button>
  </nav>

  <!-- Main Content -->
  <div class="main-content">
    <div class="container">
      
      <!-- Header & Tabs -->
      <div class="header">
        <div class="header-top">
          <h1>User Roles</h1>
          <div class="header-icons">
            <button class="icon-btn" onclick="openInviteDrawer()">
              <i class="fa-solid fa-user-plus"></i>
              <span class="tooltip">Invite User</span>
            </button>
            <button class="icon-btn">
              <i class="fa-solid fa-clock-rotate-left"></i>
              <span class="tooltip">History</span>
            </button>
            <button class="icon-btn">
              <i class="fa-solid fa-user-headset"></i>
              <span class="tooltip">Support User</span>
            </button>
          </div>
        </div>
        <div class="tabs">
          <button class="tab active" onclick="switchTab('organizational')">Organizational</button>
          <button class="tab" onclick="switchTab('bid-management')">Bid Management</button>
          <button class="tab" onclick="switchTab('takeoff')">Takeoff & Estimating</button>
        </div>
      </div>

      <!-- Content Area -->
      <div class="content">
        
        <!-- Organizational Tab Content -->
        <div id="organizational" class="tab-content active">
          
          <!-- Toast Message -->
          <div class="toast">
            <i class="toast-icon fa-regular fa-circle-info"></i>
            <span class="toast-text">Every user must have exactly one organizational role. These roles control administrative access across all products.</span>
          </div>

          <!-- Roles Table -->
          <div class="table-section">
            <div style="height: 584px; overflow-y: auto; overflow-x: clip; margin-bottom: 10px;">
              <table class="roles-table">
                <thead>
                  <tr>
                    <th>User Name</th>
                    <th>Type</th>
                    <th>Key Permissions</th>
                    <th>Auto Product Roles</th>
                    <th>Users</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link">Account Owner</a>
                          <span class="role-badge owner">OWNER</span>
                        </div>
                        <div class="role-warning">
                          <i class="fa-solid fa-lock"></i>
                          <span>Cannot be copied</span>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge standard">STANDARD</span></td>
                    <td>
                      <ul class="permission-list">
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>Billing</span>
                        </li>
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>All User Mgmt</span>
                        </li>
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>All Subscriptions</span>
                        </li>
                      </ul>
                    </td>
                    <td>
                      <ul class="permission-list">
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>Project Intelligence</span>
                        </li>
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>Bid Management</span>
                        </li>
                      </ul>
                    </td>
                    <td>1</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn">View Details</button>
                      </div>
                    </td>
                  </tr>
                  
                  <tr>
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link">Account Admin</a>
                          <span class="role-badge admin">ADMIN</span>
                        </div>
                        <div class="role-success">
                          <i class="fa-solid fa-check"></i>
                          <span>Can be copied</span>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge standard">STANDARD</span></td>
                    <td>
                      <ul class="permission-list">
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>User Mgmt</span>
                        </li>
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>Assign Licenses</span>
                        </li>
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>View Subs Info</span>
                        </li>
                        <li class="permission-item">
                          <span class="permission-circle denied"></span>
                          <span>NO Billing</span>
                        </li>
                      </ul>
                    </td>
                    <td>
                      <ul class="permission-list">
                        <li class="permission-item">
                          <span class="permission-circle denied"></span>
                          <span>None</span>
                        </li>
                      </ul>
                    </td>
                    <td>5</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn">View</button>
                        <button class="action-btn">Copy</button>
                        <button class="action-btn">Assign</button>
                      </div>
                    </td>
                  </tr>
                  
                  <tr>
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link">Team Member</a>
                        </div>
                        <div class="role-success">
                          <i class="fa-solid fa-check"></i>
                          <span>Can be copied</span>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge standard">STANDARD</span></td>
                    <td>
                      <ul class="permission-list">
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>View Own Profile</span>
                        </li>
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>Access Products</span>
                        </li>
                        <li class="permission-item">
                          <span class="permission-circle denied"></span>
                          <span>NO Subs & Licenses</span>
                        </li>
                      </ul>
                    </td>
                    <td>
                      <ul class="permission-list">
                        <li class="permission-item">
                          <span class="permission-circle denied"></span>
                          <span>None</span>
                        </li>
                      </ul>
                    </td>
                    <td>43</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn">View</button>
                        <button class="action-btn">Copy</button>
                        <button class="action-btn">Assign</button>
                      </div>
                    </td>
                  </tr>
                  
                  <tr>
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link">Regional Admin</a>
                          <span class="role-badge admin">ADMIN</span>
                        </div>
                        <div class="role-based-on">
                          <i class="fa-solid fa-pencil"></i>
                          <span>Based On: Organization Admin</span>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge custom">CUSTOM</span></td>
                    <td>
                      <ul class="permission-list">
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>User Mgmnt<br>(West Coast Only)</span>
                        </li>
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>Assign Licenses</span>
                        </li>
                        <li class="permission-item">
                          <span class="permission-circle denied"></span>
                          <span>NO Billing</span>
                        </li>
                      </ul>
                    </td>
                    <td>
                      <ul class="permission-list">
                        <li class="permission-item">
                          <span class="permission-circle denied"></span>
                          <span>None</span>
                        </li>
                      </ul>
                    </td>
                    <td>1</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn">View</button>
                        <button class="action-btn">Copy</button>
                        <button class="action-btn">Assign</button>
                        <button class="action-btn" style="color: #d32f2f;"><i class="fa-regular fa-trash-can"></i></button>
                      </div>
                    </td>
                  </tr>
                  
                  <tr>
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link">License Manager</a>
                        </div>
                        <div class="role-based-on">
                          <i class="fa-solid fa-pencil"></i>
                          <span>Based On: Organization Admin</span>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge custom">CUSTOM</span></td>
                    <td>
                      <ul class="permission-list">
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>Assign Licenses</span>
                        </li>
                        <li class="permission-item">
                          <span class="permission-circle denied"></span>
                          <span>NO User Mgmt.</span>
                        </li>
                        <li class="permission-item">
                          <span class="permission-circle denied"></span>
                          <span>NO Billing</span>
                        </li>
                      </ul>
                    </td>
                    <td>
                      <ul class="permission-list">
                        <li class="permission-item">
                          <span class="permission-circle denied"></span>
                          <span>None</span>
                        </li>
                      </ul>
                    </td>
                    <td>1</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn">View</button>
                        <button class="action-btn">Copy</button>
                        <button class="action-btn">Assign</button>
                        <button class="action-btn" style="color: #d32f2f;"><i class="fa-regular fa-trash-can"></i></button>
                      </div>
                    </td>
                  </tr>
                  
                  <tr>
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link">Bid Center User</a>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge standard">STANDARD</span></td>
                    <td>
                      <ul class="permission-list">
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>View Projects</span>
                        </li>
                      </ul>
                    </td>
                    <td>
                      <ul class="permission-list">
                        <li class="permission-item">
                          <span class="permission-circle denied"></span>
                          <span>None</span>
                        </li>
                      </ul>
                    </td>
                    <td>43</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn">View Details</button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Table Footer -->
            <div class="table-footer">
              <div class="results-count">
                <strong>4</strong> Results Found
              </div>
              <div style="display: flex; gap: 20px; align-items: center;">
                <div class="rows-per-page">
                  <span>Rows per page</span>
                  <select class="rows-select">
                    <option>Select Item</option>
                    <option>50</option>
                    <option>25</option>
                    <option>10</option>
                  </select>
                </div>
                <div class="page-nav">
                  <span class="page-info">1-4 of 4</span>
                  <button class="page-btn" disabled><i class="fa-regular fa-chevron-left"></i></button>
                  <button class="page-btn"><i class="fa-regular fa-chevron-right"></i></button>
                </div>
              </div>
            </div>
          </div>

        </div>

        <!-- Bid Management Tab Content -->
        <div id="bid-management" class="tab-content">
          
          <!-- Toast Message -->
          <div class="toast">
            <i class="toast-icon fa-regular fa-circle-info"></i>
            <span class="toast-text">Bid Management roles control access to bidding features and project management.</span>
          </div>

          <!-- Table Controls -->
          <div class="table-controls">
            <div class="table-controls-left">
              <div class="filters">
                <select class="filter-btn" id="bmRoleFilter" onchange="filterBMTable()">
                  <option value="">Show All Roles</option>
                  <option value="Company Admin">Company Admin</option>
                  <option value="Project Manager">Project Manager</option>
                  <option value="Bid Coordinator">Bid Coordinator</option>
                  <option value="Estimator">Estimator</option>
                  <option value="PQ Analyst">PQ Analyst</option>
                  <option value="Team Member">Team Member</option>
                  <option value="Intern">Intern</option>
                  <option value="">────────────</option>
                  <option value="Senior Estimator">Senior Estimator (Custom)</option>
                </select>
              </div>
            </div>
            <div class="table-controls-right">
              <button class="search-btn"><i class="fa-regular fa-magnifying-glass"></i></button>
            </div>
          </div>

          <!-- Roles Table -->
          <div class="table-section">
            <div style="height: 513px; overflow-y: auto; margin-bottom: 10px;">
              <table class="roles-table">
                <thead>
                  <tr>
                    <th>Role Name</th>
                    <th>Type</th>
                    <th>Key Permissions</th>
                    <th>Users</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="bmTableBody">
                  <!-- Company Admin -->
                  <tr data-role-type="Company Admin">
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link" onclick="viewRoleDetails('Company Admin')">Company Admin</a>
                          <span class="role-badge bm">BM</span>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge standard">STANDARD</span></td>
                    <td>Full access to all Bid Management features. User management, project creation, reporting, audit logs.</td>
                    <td>1</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn" onclick="viewRoleDetails('Company Admin')">View</button>
                        <button class="action-btn" onclick="copyRole('Company Admin')">Copy</button>
                        <button class="action-btn" onclick="assignRole('Company Admin')">Assign</button>
                      </div>
                    </td>
                  </tr>
                  
                  <!-- Project Manager -->
                  <tr data-role-type="Project Manager">
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link" onclick="viewRoleDetails('Project Manager')">Project Manager</a>
                          <span class="role-badge bm">BM</span>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge standard">STANDARD</span></td>
                    <td>Create and manage projects, bidder communications, PQ Scopes management</td>
                    <td>1</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn" onclick="viewRoleDetails('Project Manager')">View</button>
                        <button class="action-btn" onclick="copyRole('Project Manager')">Copy</button>
                        <button class="action-btn" onclick="assignRole('Project Manager')">Assign</button>
                      </div>
                    </td>
                  </tr>
                  
                  <!-- Bid Coordinator -->
                  <tr data-role-type="Bid Coordinator">
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link" onclick="viewRoleDetails('Bid Coordinator')">Bid Coordinator</a>
                          <span class="role-badge bm">BM</span>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge standard">STANDARD</span></td>
                    <td>Manage bid process, send Invitations to Bid, organize and level bids, PQ Scopes management</td>
                    <td>1</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn" onclick="viewRoleDetails('Bid Coordinator')">View</button>
                        <button class="action-btn" onclick="copyRole('Bid Coordinator')">Copy</button>
                        <button class="action-btn" onclick="assignRole('Bid Coordinator')">Assign</button>
                      </div>
                    </td>
                  </tr>
                  
                  <!-- Estimator -->
                  <tr data-role-type="Estimator">
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link" onclick="viewRoleDetails('Estimator')">Estimator</a>
                          <span class="role-badge bm">BM</span>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge standard">STANDARD</span></td>
                    <td>Review and submit bids, upload bid documents, PQ Scopes access</td>
                    <td>3</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn" onclick="viewRoleDetails('Estimator')">View</button>
                        <button class="action-btn" onclick="copyRole('Estimator')">Copy</button>
                        <button class="action-btn" onclick="assignRole('Estimator')">Assign</button>
                      </div>
                    </td>
                  </tr>
                  
                  <!-- PQ Analyst -->
                  <tr data-role-type="PQ Analyst">
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link" onclick="viewRoleDetails('PQ Analyst')">PQ Analyst</a>
                          <span class="role-badge bm">BM</span>
                        </div>
                        <div class="role-warning">
                          <i class="fa-solid fa-circle-info"></i>
                          <span>Does not have PQ Scopes Management Access</span>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge standard">STANDARD</span></td>
                    <td>Prequalification analysis, general communications</td>
                    <td>1</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn" onclick="viewRoleDetails('PQ Analyst')">View</button>
                        <button class="action-btn" onclick="copyRole('PQ Analyst')">Copy</button>
                        <button class="action-btn" onclick="assignRole('PQ Analyst')">Assign</button>
                      </div>
                    </td>
                  </tr>
                  
                  <!-- Team Member -->
                  <tr data-role-type="Team Member">
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link" onclick="viewRoleDetails('Team Member')">Team Member</a>
                          <span class="role-badge bm">BM</span>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge standard">STANDARD</span></td>
                    <td>Limited project participation, view documents, basic bid submission</td>
                    <td>1</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn" onclick="viewRoleDetails('Team Member')">View</button>
                        <button class="action-btn" onclick="copyRole('Team Member')">Copy</button>
                        <button class="action-btn" onclick="assignRole('Team Member')">Assign</button>
                      </div>
                    </td>
                  </tr>
                  
                  <!-- Intern -->
                  <tr data-role-type="Intern">
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link" onclick="viewRoleDetails('Intern')">Intern</a>
                          <span class="role-badge bm">BM</span>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge standard">STANDARD</span></td>
                    <td>View-only access, most restricted role</td>
                    <td>1</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn" onclick="viewRoleDetails('Intern')">View</button>
                        <button class="action-btn" onclick="copyRole('Intern')">Copy</button>
                        <button class="action-btn" onclick="assignRole('Intern')">Assign</button>
                      </div>
                    </td>
                  </tr>
                  
                  <!-- Custom Role Example: Senior Estimator -->
                  <tr data-role-type="Senior Estimator" style="border-top: 2px solid #dad8d7;">
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link" onclick="viewRoleDetails('Senior Estimator')">Senior Estimator</a>
                          <span class="role-badge bm">BM</span>
                        </div>
                        <div class="role-based-on">
                          <i class="fa-solid fa-pencil"></i>
                          <span>Based On: Estimator</span>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge custom">CUSTOM</span></td>
                    <td>Based on Estimator + additional project visibility</td>
                    <td>1</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn" onclick="viewRoleDetails('Senior Estimator')">View</button>
                        <button class="action-btn" onclick="copyRole('Senior Estimator')">Copy</button>
                        <button class="action-btn" onclick="assignRole('Senior Estimator')">Assign</button>
                        <button class="action-btn" onclick="editRole('Senior Estimator')">Edit</button>
                        <button class="action-btn" style="color: #d32f2f;" onclick="deleteRole('Senior Estimator')"><i class="fa-regular fa-trash-can"></i></button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Table Footer -->
            <div class="table-footer">
              <div class="results-count">
                <strong id="bmResultsCount">8</strong> Results Found
              </div>
              <div style="display: flex; gap: 20px; align-items: center;">
                <div class="rows-per-page">
                  <span>Rows per page</span>
                  <select class="rows-select">
                    <option>Select Item</option>
                    <option>50</option>
                    <option>25</option>
                    <option>10</option>
                  </select>
                </div>
                <div class="page-nav">
                  <span class="page-info">1-8 of 8</span>
                  <button class="page-btn" disabled><i class="fa-regular fa-chevron-left"></i></button>
                  <button class="page-btn"><i class="fa-regular fa-chevron-right"></i></button>
                </div>
              </div>
            </div>
          </div>

        </div>

        <!-- Takeoff & Estimating Tab Content -->
        <div id="takeoff" class="tab-content">
          
          <!-- Toast Message -->
          <div class="toast">
            <i class="toast-icon fa-regular fa-circle-info"></i>
            <span class="toast-text">Takeoff & Estimating roles control access to estimating and takeoff tools.</span>
          </div>

          <!-- Table Controls -->
          <div class="table-controls">
            <div class="table-controls-left">
              <div class="filters">
                <select class="filter-btn" id="ostGroupFilter" onchange="filterOSTTable()">
                  <option value="">Show All Groups</option>
                  <option value="Admin">OST - Admin</option>
                  <option value="Estimator">OST - Estimator</option>
                  <option value="Custom">Custom Roles</option>
                </select>
              </div>
            </div>
            <div class="table-controls-right">
              <button class="search-btn"><i class="fa-regular fa-magnifying-glass"></i></button>
            </div>
          </div>

          <!-- Roles Table -->
          <div class="table-section">
            <div style="height: 513px; overflow-y: auto; margin-bottom: 10px;">
              <table class="roles-table">
                <thead>
                  <tr>
                    <th>Role Name</th>
                    <th>Type</th>
                    <th>Key Permissions</th>
                    <th>Users</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="ostTableBody">
                  <tr data-group-type="Admin">
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link">Takeoff Admin</a>
                          <span class="role-badge ost">OST</span>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge standard">STANDARD</span></td>
                    <td>
                      <ul class="permission-list">
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>Manage Templates</span>
                        </li>
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>Manage Formulas</span>
                        </li>
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>Manage Settings</span>
                        </li>
                      </ul>
                    </td>
                    <td>2</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn">View</button>
                        <button class="action-btn">Copy</button>
                        <button class="action-btn">Assign</button>
                      </div>
                    </td>
                  </tr>
                  
                  <tr data-group-type="Estimator">
                    <td>
                      <div class="role-name">
                        <div class="role-name-row">
                          <a class="role-link">Regional Estimator</a>
                          <span class="role-badge ost">OST</span>
                        </div>
                        <div class="role-based-on">
                          <i class="fa-solid fa-pencil"></i>
                          <span>Based On: Takeoff Admin</span>
                        </div>
                      </div>
                    </td>
                    <td><span class="role-type-badge custom">CUSTOM</span></td>
                    <td>
                      <ul class="permission-list">
                        <li class="permission-item">
                          <span class="permission-circle granted"></span>
                          <span>Estimating for West Coast projects ONLY</span>
                        </li>
                      </ul>
                    </td>
                    <td>2</td>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn">View</button>
                        <button class="action-btn">Copy</button>
                        <button class="action-btn">Assign</button>
                        <button class="action-btn" style="color: #d32f2f;"><i class="fa-regular fa-trash-can"></i></button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Pagination -->
            <div class="pagination">
              <span class="results-info">1-5 of 5</span>
              <button class="pagination-btn" disabled><i class="fa-regular fa-chevron-left"></i></button>
              <button class="pagination-btn"><i class="fa-regular fa-chevron-right"></i></button>
                    <td>
                      <div class="action-buttons">
                        <button class="action-btn">View</button>
                        <button class="action-btn">Copy</button>
                        <button class="action-btn">Assign</button>
                      </div>
                    </td>
                  </tr>\n                </tbody>\n              </table>\n            </div>\n\n            <!-- Table Footer -->
            <div class="table-footer">
              <div class="results-count">
                <strong id="ostResultsCount">3</strong> Results Found
              </div>
              <div style="display: flex; gap: 20px; align-items: center;">
                <div class="rows-per-page">
                  <span>Rows per page</span>
                  <select class="rows-select">
                    <option>Select Item</option>
                    <option>50</option>
                    <option>25</option>
                    <option>10</option>
                  </select>
                </div>
                <div class="page-nav">
                  <span class="page-info">1-3 of 3</span>
                  <button class="page-btn" disabled><i class="fa-regular fa-chevron-left"></i></button>
                  <button class="page-btn"><i class="fa-regular fa-chevron-right"></i></button>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>

    </div>
  </div>

</div>

<script>
// Tab switching
function switchTab(tabId) {
  // Hide all tab content
  document.querySelectorAll('.tab-content').forEach(content => {
    content.classList.remove('active');
  });
  
  // Remove active class from all tabs
  document.querySelectorAll('.tab').forEach(tab => {
    tab.classList.remove('active');
  });
  
  // Show selected tab content
  document.getElementById(tabId).classList.add('active');
  
  // Add active class to selected tab
  event.target.classList.add('active');
}

// Filter Bid Management table
function filterBMTable() {
  const filter = document.getElementById('bmRoleFilter').value;
  const rows = document.querySelectorAll('#bmTableBody tr');
  let visibleCount = 0;
  
  rows.forEach(row => {
    const roleType = row.getAttribute('data-role-type');
    if (!filter || roleType === filter || (filter === 'Custom' && row.querySelector('.role-type-badge.custom'))) {
      row.style.display = '';
      visibleCount++;
    } else {
      row.style.display = 'none';
    }
  });
  
  document.getElementById('bmResultsCount').textContent = visibleCount;
}

// Filter OST table
function filterOSTTable() {
  const filter = document.getElementById('ostGroupFilter').value;
  const rows = document.querySelectorAll('#ostTableBody tr');
  let visibleCount = 0;
  
  rows.forEach(row => {
    const groupType = row.getAttribute('data-group-type');
    if (!filter || groupType === filter || (filter === 'Custom' && row.querySelector('.role-type-badge.custom'))) {
      row.style.display = '';
      visibleCount++;
    } else {
      row.style.display = 'none';
    }
  });
  
  document.getElementById('ostResultsCount').textContent = visibleCount;
}

// Mobile navigation toggle
function toggleMobileNav() {
  const nav = document.querySelector('.compact-nav');
  const overlay = document.querySelector('.compact-overlay');
  const hamburger = document.querySelector('.hamburger-menu');
  
  nav.classList.toggle('open');
  overlay.classList.toggle('open');
  hamburger.classList.toggle('active');
}

// ============================================
// MODAL SYSTEM - BID MANAGEMENT ROLES
// ============================================

// Role Data Structure
const roleData = {
  'Company Admin': {
    type: 'STANDARD',
    description: 'Full access to all Bid Management features. User management, project creation, reporting, audit logs.',
    permissions: {
      'Account Management': [
        { name: 'User Management', access: 'Edit' },
        { name: 'Organization Settings', access: 'Edit' }
      ],
      'Projects': [
        { name: 'Create Projects', access: 'Create' },
        { name: 'Manage All Projects', access: 'Edit' },
        { name: 'Delete Projects', access: 'Delete' }
      ],
      'Bid Process': [
        { name: 'Send Invitations to Bid', access: 'Create' },
        { name: 'Organize & Level Bids', access: 'Edit' },
        { name: 'Approve Bids', access: 'Approve' }
      ],
      'Documents': [
        { name: 'Upload Documents', access: 'Create' },
        { name: 'Manage Documents', access: 'Edit' }
      ],
      'Communications': [
        { name: 'Bidder Communications', access: 'Edit' },
        { name: 'General Communications', access: 'Edit' }
      ],
      'Prequalification': [
        { name: 'PQ Scopes Management', access: 'Edit' },
        { name: 'PQ Analysis', access: 'Edit' }
      ],
      'Reporting': [
        { name: 'View Reports', access: 'View' },
        { name: 'Export Reports', access: 'View' },
        { name: 'Audit Logs', access: 'View' }
      ]
    },
    users: 1
  },
  'Project Manager': {
    type: 'STANDARD',
    description: 'Create and manage projects, bidder communications, PQ Scopes management',
    permissions: {
      'Account Management': [],
      'Projects': [
        { name: 'Create Projects', access: 'Create' },
        { name: 'Manage Own Projects', access: 'Edit' }
      ],
      'Bid Process': [
        { name: 'Send Invitations to Bid', access: 'Create' },
        { name: 'Organize & Level Bids', access: 'Edit' }
      ],
      'Documents': [
        { name: 'Upload Documents', access: 'Create' },
        { name: 'View Documents', access: 'View' }
      ],
      'Communications': [
        { name: 'Bidder Communications', access: 'Edit' },
        { name: 'General Communications', access: 'Edit' }
      ],
      'Prequalification': [
        { name: 'PQ Scopes Management', access: 'Edit' }
      ],
      'Reporting': [
        { name: 'View Reports', access: 'View' }
      ]
    },
    users: 1
  },
  'Bid Coordinator': {
    type: 'STANDARD',
    description: 'Manage bid process, send Invitations to Bid, organize and level bids, PQ Scopes management',
    permissions: {
      'Bid Process': [
        { name: 'Send Invitations to Bid', access: 'Create' },
        { name: 'Organize & Level Bids', access: 'Edit' },
        { name: 'Track Bids', access: 'View' }
      ],
      'Documents': [
        { name: 'Upload Bid Documents', access: 'Create' },
        { name: 'View Documents', access: 'View' }
      ],
      'Communications': [
        { name: 'Bidder Communications', access: 'Edit' }
      ],
      'Prequalification': [
        { name: 'PQ Scopes Management', access: 'Edit' }
      ],
      'Reporting': [
        { name: 'View Bid Reports', access: 'View' }
      ]
    },
    users: 1
  },
  'Estimator': {
    type: 'STANDARD',
    description: 'Review and submit bids, upload bid documents, PQ Scopes access',
    permissions: {
      'Bid Process': [
        { name: 'Submit Bids', access: 'Create' },
        { name: 'Review Bids', access: 'View' }
      ],
      'Documents': [
        { name: 'Upload Bid Documents', access: 'Create' },
        { name: 'View Documents', access: 'View' }
      ],
      'Prequalification': [
        { name: 'PQ Scopes Access', access: 'View' }
      ]
    },
    users: 3
  },
  'PQ Analyst': {
    type: 'STANDARD',
    description: 'Prequalification analysis, general communications',
    note: 'This role can perform prequalification analysis but cannot manage PQ Scopes. For PQ Scopes access, assign Estimator, Bid Coordinator, Project Manager, or Company Admin.',
    permissions: {
      'Prequalification': [
        { name: 'PQ Analysis', access: 'Edit' }
      ],
      'Communications': [
        { name: 'General Communications', access: 'View' }
      ]
    },
    users: 1
  },
  'Team Member': {
    type: 'STANDARD',
    description: 'Limited project participation, view documents, basic bid submission',
    permissions: {
      'Projects': [
        { name: 'View Projects', access: 'View' }
      ],
      'Documents': [
        { name: 'View Documents', access: 'View' }
      ],
      'Bid Process': [
        { name: 'Basic Bid Participation', access: 'View' }
      ]
    },
    users: 1
  },
  'Intern': {
    type: 'STANDARD',
    description: 'View-only access, most restricted role',
    permissions: {
      'Projects': [
        { name: 'View Projects', access: 'View' }
      ],
      'Documents': [
        { name: 'View Documents', access: 'View' }
      ]
    },
    users: 1
  },
  'Senior Estimator': {
    type: 'CUSTOM',
    basedOn: 'Estimator',
    description: 'Based on Estimator + additional project visibility',
    permissions: {
      'Projects': [
        { name: 'View All Projects', access: 'View' }
      ],
      'Bid Process': [
        { name: 'Submit Bids', access: 'Create' },
        { name: 'Review Bids', access: 'View' }
      ],
      'Documents': [
        { name: 'Upload Bid Documents', access: 'Create' },
        { name: 'View Documents', access: 'View' }
      ],
      'Prequalification': [
        { name: 'PQ Scopes Access', access: 'View' }
      ]
    },
    users: 1
  }
};

// View Role Details
function viewRoleDetails(roleName) {
  const role = roleData[roleName];
  if (!role) return;
  
  let permissionsHTML = '';
  for (const [category, perms] of Object.entries(role.permissions)) {
    if (perms.length > 0) {
      permissionsHTML += `
        <div class="permission-group">
          <div class="permission-group-title">${category}</div>
          <div class="permission-items">
            ${perms.map(p => `
              <div class="permission-detail">
                <span class="permission-access ${p.access.toLowerCase()}">${p.access}</span>
                <span class="permission-name">${p.name}</span>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }
  }
  
  let noteHTML = '';
  if (role.note) {
    noteHTML = `<div class="callout-box"><strong>Important Note:</strong><p>${role.note}</p></div>`;
  }
  
  let basedOnHTML = '';
  if (role.basedOn) {
    basedOnHTML = `<p style="font-size: 13px; color: #7b2cbf; font-weight: 600; margin-bottom: 16px;"><i class="fa-solid fa-pencil"></i> Based On: ${role.basedOn}</p>`;
  }
  
  const modalHTML = `
    <div class="modal-overlay active" id="roleDetailsModal" onclick="closeModalOnOverlay(event, 'roleDetailsModal')">
      <div class="modal large" onclick="event.stopPropagation()">
        <div class="modal-header">
          <h2 class="modal-title">${roleName} <span class="role-badge bm" style="margin-left: 8px;">BM</span></h2>
          <button class="modal-close" onclick="closeModal('roleDetailsModal')"><i class="fa-regular fa-xmark"></i></button>
        </div>
        <div class="modal-body">
          ${basedOnHTML}
          <div class="modal-body-section">
            <p style="font-size: 14px; color: #4a4f55; margin-bottom: 20px;">${role.description}</p>
            ${noteHTML}
          </div>
          <div class="modal-body-section">
            <div class="modal-section-title">Permissions</div>
            ${permissionsHTML}
          </div>
          <div class="modal-body-section">
            <div class="modal-section-title">Users Assigned (${role.users})</div>
            <p style="font-size: 13px; color: #88888e; font-style: italic;">User list would appear here in production</p>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" onclick="closeModal('roleDetailsModal')">Close</button>
        </div>
      </div>
    </div>
  `;
  
  document.body.insertAdjacentHTML('beforeend', modalHTML);
}

// Copy Role
function copyRole(roleName) {
  const role = roleData[roleName];
  if (!role) return;
  
  const modalHTML = `
    <div class="modal-overlay active" id="copyRoleModal" onclick="closeModalOnOverlay(event, 'copyRoleModal')">
      <div class="modal medium" onclick="event.stopPropagation()">
        <div class="modal-header">
          <h2 class="modal-title">Create Custom Role</h2>
          <button class="modal-close" onclick="closeModal('copyRoleModal')"><i class="fa-regular fa-xmark"></i></button>
        </div>
        <div class="modal-body">
          <div class="modal-info">
            <p class="modal-info-text">Creating a custom role based on: <strong>${roleName}</strong></p>
          </div>
          <div class="form-group">
            <label class="form-label">New Role Name</label>
            <input type="text" class="form-input" id="newRoleName" placeholder="Enter unique role name">
            <p class="form-help">This name must be unique across all your roles</p>
          </div>
          <div class="form-group">
            <label class="form-label">Description</label>
            <input type="text" class="form-input" id="newRoleDesc" value="${role.description}">
          </div>
          <div class="modal-body-section">
            <p style="font-size: 13px; color: #4a4f55; margin-bottom: 12px;">All permissions from <strong>${roleName}</strong> will be copied. You can modify them after creation.</p>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" onclick="closeModal('copyRoleModal')">Cancel</button>
          <button class="btn-primary" onclick="createCustomRole()">Create Role</button>
        </div>
      </div>
    </div>
  `;
  
  document.body.insertAdjacentHTML('beforeend', modalHTML);
}

// Edit Role (Custom roles only)
function editRole(roleName) {
  const role = roleData[roleName];
  if (!role || role.type !== 'CUSTOM') return;
  
  const modalHTML = `
    <div class="modal-overlay active" id="editRoleModal" onclick="closeModalOnOverlay(event, 'editRoleModal')">
      <div class="modal medium" onclick="event.stopPropagation()">
        <div class="modal-header">
          <h2 class="modal-title">Edit Custom Role</h2>
          <button class="modal-close" onclick="closeModal('editRoleModal')"><i class="fa-regular fa-xmark"></i></button>
        </div>
        <div class="modal-body">
          <div class="modal-warning">
            <p class="modal-warning-title">Users Affected: ${role.users}</p>
            <p class="modal-warning-text">Changes to this role will affect ${role.users} user(s) currently assigned this role.</p>
          </div>
          <div class="form-group">
            <label class="form-label">Role Name</label>
            <input type="text" class="form-input" value="${roleName}">
          </div>
          <div class="form-group">
            <label class="form-label">Description</label>
            <input type="text" class="form-input" value="${role.description}">
          </div>
          <div class="modal-body-section">
            <p style="font-size: 13px; color: #7b2cbf; font-weight: 600;"><i class="fa-solid fa-pencil"></i> Based On: ${role.basedOn}</p>
            <p style="font-size: 13px; color: #88888e; margin-top: 8px;">Permission editing interface would appear here in production</p>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" onclick="closeModal('editRoleModal')">Cancel</button>
          <button class="btn-primary" onclick="saveRoleEdits()">Save Changes</button>
        </div>
      </div>
    </div>
  `;
  
  document.body.insertAdjacentHTML('beforeend', modalHTML);
}

// Delete Role (Custom roles only)
function deleteRole(roleName) {
  const role = roleData[roleName];
  if (!role || role.type !== 'CUSTOM') return;
  
  let warningHTML = '';
  if (role.users > 0) {
    warningHTML = `
      <div class="modal-warning">
        <p class="modal-warning-title">Users Currently Assigned</p>
        <p class="modal-warning-text">This role is currently assigned to ${role.users} user(s). Choose a replacement role for these users before deleting.</p>
      </div>
      <div class="form-group">
        <label class="form-label">Replacement Role</label>
        <select class="form-select" id="replacementRole">
          <option value="">Select a role...</option>
          ${Object.keys(roleData).filter(r => r !== roleName && roleData[r].type === 'STANDARD').map(r => 
            `<option value="${r}">${r}</option>`
          ).join('')}
        </select>
      </div>
    `;
  } else {
    warningHTML = `<p style="font-size: 14px; color: #4a4f55;">Are you sure you want to delete the custom role <strong>"${roleName}"</strong>? This action cannot be undone.</p>`;
  }
  
  const modalHTML = `
    <div class="modal-overlay active" id="deleteRoleModal" onclick="closeModalOnOverlay(event, 'deleteRoleModal')">
      <div class="modal small" onclick="event.stopPropagation()">
        <div class="modal-header">
          <h2 class="modal-title">Delete Custom Role</h2>
          <button class="modal-close" onclick="closeModal('deleteRoleModal')"><i class="fa-regular fa-xmark"></i></button>
        </div>
        <div class="modal-body">
          ${warningHTML}
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" onclick="closeModal('deleteRoleModal')">Cancel</button>
          <button class="btn-danger" onclick="confirmDeleteRole('${roleName}')">Delete Role</button>
        </div>
      </div>
    </div>
  `;
  
  document.body.insertAdjacentHTML('beforeend', modalHTML);
}

// Assign Role
function assignRole(roleName) {
  const role = roleData[roleName];
  if (!role) return;
  
  const modalHTML = `
    <div class="modal-overlay active" id="assignRoleModal" onclick="closeModalOnOverlay(event, 'assignRoleModal')">
      <div class="modal large" onclick="event.stopPropagation()">
        <div class="modal-header">
          <h2 class="modal-title">Assign ${roleName} Role</h2>
          <button class="modal-close" onclick="closeModal('assignRoleModal')"><i class="fa-regular fa-xmark"></i></button>
        </div>
        <div class="modal-body">
          <div class="modal-info">
            <p class="modal-info-text">Select users to assign the ${roleName} role. Users must have a BM license or one will be authorized.</p>
          </div>
          <div class="modal-body-section">
            <div class="modal-section-title">Available Users</div>
            <div class="user-list">
              <div class="user-list-item">
                <input type="checkbox" class="user-list-checkbox checkbox">
                <div class="user-list-info">
                  <div class="user-list-name">Hoban Washburne</div>
                  <div class="user-list-email">hoban@serenity.com • Current Role: None</div>
                </div>
              </div>
              <div class="user-list-item">
                <input type="checkbox" class="user-list-checkbox checkbox">
                <div class="user-list-info">
                  <div class="user-list-name">Malcolm Reynolds</div>
                  <div class="user-list-email">mal@serenity.com • No BM License</div>
                </div>
              </div>
              <div class="user-list-item">
                <input type="checkbox" class="user-list-checkbox checkbox">
                <div class="user-list-info">
                  <div class="user-list-name">Jayne Cobb</div>
                  <div class="user-list-email">jayne@serenity.com • No BM License (Requested)</div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-warning" style="margin-top: 16px;">
            <p class="modal-warning-title">Seat Availability</p>
            <p class="modal-warning-text">11 seats available out of 20. Selected users without licenses will use available seats.</p>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" onclick="closeModal('assignRoleModal')">Cancel</button>
          <button class="btn-primary" onclick="confirmAssignRole('${roleName}')">Assign Role</button>
        </div>
      </div>
    </div>
  `;
  
  document.body.insertAdjacentHTML('beforeend', modalHTML);
}

// Modal Utility Functions
function closeModal(modalId) {
  const modal = document.getElementById(modalId);
  if (modal) {
    modal.remove();
  }
}

function closeModalOnOverlay(event, modalId) {
  if (event.target.classList.contains('modal-overlay')) {
    closeModal(modalId);
  }
}

// Placeholder action functions
function createCustomRole() {
  alert('Custom role would be created in production');
  closeModal('copyRoleModal');
}

function saveRoleEdits() {
  alert('Role changes would be saved in production');
  closeModal('editRoleModal');
}

function confirmDeleteRole(roleName) {
  alert(`Role "${roleName}" would be deleted in production`);
  closeModal('deleteRoleModal');
}

function confirmAssignRole(roleName) {
  alert(`Users would be assigned "${roleName}" role in production`);
  closeModal('assignRoleModal');
}
</script>

<!-- Invite Drawer JavaScript -->
<script src="invite-drawer.js"></script>

<!-- Drawer Overlay -->
<div class="drawer-overlay" id="drawerOverlay"></div>

<!-- Invite Users Drawer -->
<div class="drawer" id="inviteDrawer">
  <!-- Header -->
  <div style="background: #f4f4f4; border-bottom: 1px solid #e7e6e5; height: 60px; padding: 14px 20px 14px 10px; display: flex; align-items: flex-end; justify-content: space-between;">
    <h2 style="font-family: 'Montserrat', sans-serif; font-weight: 500; font-size: 24px; line-height: normal; color: #1c1f22; margin: 0; padding-left: 10px;">Invite User(s)</h2>
    <button onclick="closeInviteDrawer()" style="background: none; border: none; border-radius: 9999px; cursor: pointer; padding: 6px; width: 26px; height: 26px; display: flex; align-items: center; justify-content: center;">
      <i class="fa-regular fa-xmark" style="font-size: 18px; line-height: 16px; color: #4a4f55;"></i>
    </button>
  </div>
  
  <!-- Content Container -->
  <div style="background: white; flex: 1; display: flex; flex-direction: column; position: relative; overflow-y: auto;">
    <!-- Toggle Section - Individual Mode / Bulk Mode -->
    <div style="background: #f2fafe; padding: 10px 0; display: flex; justify-content: center; align-items: center;">
      <div style="display: flex; gap: 10px; align-items: center; cursor: pointer;" onclick="toggleInviteMode()">
        <span style="font-family: 'Montserrat', sans-serif; font-weight: 500; font-size: 14px; line-height: 16px; color: #4a4f55;">Individual Mode</span>
        <div id="inviteModeToggle" style="width: 54px; height: 26px; background: #88888e; border-radius: 20px; padding: 4px; display: flex; align-items: center; transition: all 0.3s ease;">
          <div style="width: 20px; height: 20px; background: white; border-radius: 50%; transition: all 0.3s ease;"></div>
        </div>
        <span style="font-family: 'Montserrat', sans-serif; font-weight: 500; font-size: 14px; line-height: 16px; color: #4a4f55;">Bulk Mode</span>
      </div>
    </div>
    
    <!-- Main Content Area -->
    <div id="drawerContent" style="padding: 15px 13px 20px 13px; display: flex; gap: 15px; width: 1004px;">
      <!-- Content loaded dynamically by JavaScript -->
    </div>
  </div>
  
  <!-- Footer -->
  <div style="background: #ffffff; border-top: 1px solid #dad8d7; padding: 20px; display: flex; align-items: center; flex-shrink: 0; min-height: 72px; width: 100%; position: relative; z-index: 10;">
    <div style="position: relative; width: 100%; height: 32px; display: flex; justify-content: space-between; align-items: center;">
      <!-- Left Side - Reset Button (Secondary Small - Disabled) -->
      <div>
        <button class="btn-secondary" disabled>Reset</button>
      </div>
      
      <!-- Right Side - Cancel + Send Invitation Buttons -->
      <div style="display: flex; gap: 20px; align-items: center;">
        <!-- Cancel Button (Link Small) -->
        <button class="btn-link" onclick="closeInviteDrawer()">Cancel</button>
        
        <!-- Send Invitation Button (Primary Small - Disabled) -->
        <button class="btn-primary" disabled>Send Invitation</button>
      </div>
    </div>
  </div>
</div>

</body>
</html>
